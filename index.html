<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首页</title>
    <link rel="stylesheet" href="./swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="./iconfont/iconfont.css">
    <link rel="stylesheet" href="./css/public.css">
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
    <header>
        <div class="area">
            <ul class="header-left">
                <li>
                    <div><a href="#">中国大陆</a><span><i class="iconfont icon-xiala"></i></span></div>
                    <div class="site-nav-menu">
                        <ul>
                            <li><a href="#">全球</a> </li>
                            <li><a href="#">中国大陆</a></li>
                            <li><a href="#">中国香港</a></li>
                            <li><a href="#">中国澳门</a></li>
                            <li><a href="#">韩国</a></li>
                            <li><a href="#">马来西亚</a></li>
                        </ul>
                    </div>
                </li>
                <li id="user"><a href="./html/login.html">用户</a></li>
                <li><a href="#">手机逛淘宝</a></li>
                <li><a href="#">网页无障碍</a></li>
            </ul>
            <ul class="header-right">
                <li>
                    <p><a href="./html/my.html">我的淘宝</a><span><i class="iconfont icon-xiala"></i></span></p>
                    <div class="my-menu right-menu">
                        <ul>
                            <li><a href="#">已买到的宝贝</a></li>
                            <li><a href="#">我的足迹</a></li>
                        </ul>
                    </div>
                </li>
                <li><i class="iconfont icon-gouwuche-tianchong"></i><a href="./html/cart.html">购物车</a></li>
                <li>
                    <p><i class="iconfont icon-shoucang"></i><a href="#">收藏夹</a><span><i class="iconfont icon-xiala"></i></span></p>
                    <div class="favorites right-menu">
                        <ul>
                            <li><a href="#">收藏的宝贝</a></li>
                            <li><a href="#">收藏的店铺</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="#">商品分类</a></li>
                <li><a href="#">免费开店</a></li>
                <li id="use_sign">|</li>
                <li>
                    <p><a href="#">千牛卖家中心</a><span><i class="iconfont icon-xiala"></i></span></p>
                    <div class="right-menu">
                        <ul>
                            <li><a href="#">开店入驻</a></li>
                            <li><a href="#">已卖出的宝贝</a></li>
                            <li><a href="#">出售中的宝贝</a></li>
                            <li><a href="#">卖家服务市场</a></li>
                            <li><a href="#">卖家培训中心</a></li>
                            <li><a href="#">体检中心</a></li>
                            <li><a href="#">电商学习中心</a></li>
                        </ul>
                    </div>
                </li>
                <li>
                    <p><a href="./html/service.html">联系客服</a><span><i class="iconfont icon-xiala"></i></span></p>
                    <div class="right-menu">
                        <ul>
                            <li><a href="#">消费者客服</a></li>
                            <li><a href="#">卖家客服</a></li>
                            <li><a href="#">意见反馈</a></li>
                            <li><a href="#">网页版旺旺</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </header>
    <div class="search">
        <div class="area">
            <div class="logo">
                <h1><a href="#"></a></h1>
            </div>
            <div class="search-main">
                <div class="search-main-top">
                    <div class="search-head">宝贝</div>
                    <form action="#">
                        <input type="text" class="main-search">
                        <ul id="serach-content">
                            <!-- <li>aaaa</li> -->
                        </ul>
                        <button class="search-btn" >搜索</button>
                    </form>
                </div>
                <div class="search-main-bom">
                    <a href="#">新款连衣裙</a>
                    <a href="#">四件套</a>
                    <a href="#">潮流T恤</a>
                    <a href="#">时尚女鞋</a>
                    <a href="#">短裤</a>
                    <a href="#">半身裙</a>
                    <a href="#">男士外套</a>
                    <a href="#">墙纸</a>
                    <a href="#">行车记录仪</a>
                    <a href="#">新款男鞋</a>
                </div>
            </div>
        </div>
    </div>
    <div class="banner">
        <div class="area">
            <div class="newservice">
                <h2>分类</h2>
                <ul>
                    <li>
                        <i class="iconfont icon-nvzhuangneiyi"></i>
                        <a href="">女装</a>
                        <span>/</span>
                        <a href="">内衣</a>
                        <span>/</span>
                        <a href="">奢品</a>
                    </li>
                    <li>
                        <i class="iconfont icon-tubiao_xiezi"></i>
                        <a href="">女鞋</a>
                        <span>/</span>
                        <a href="">男鞋</a>
                        <span>/</span>
                        <a href="">箱包</a>
                    </li>
                    <li>
                        <i class="iconfont icon-hufupin"></i>
                        <a href="">美妆</a>
                        <span>/</span>
                        <a href="">饰品</a>
                        <span>/</span>
                        <a href="">洗护</a>
                    </li>
                    <li>
                        <i class="iconfont icon-yifu"></i>
                        <a href="">男装</a>
                        <span>/</span>
                        <a href="">运动</a>
                        <span>/</span>
                        <a href="">百货</a>
                    </li>
                    <li>
                        <i class="iconfont icon-shouji"></i>
                        <a href="">手机</a>
                        <span>/</span>
                        <a href="">数码</a>
                        <span>/</span>
                        <a href="">企业礼品</a>
                    </li>
                    <li>
                        <i class="iconfont icon-shafa"></i>
                        <a href="">家装</a>
                        <span>/</span>
                        <a href="">电器</a>
                        <span>/</span>
                        <a href="">车品</a>
                    </li>
                    <li>
                        <i class="iconfont icon-yingtao"></i>
                        <a href="">食品</a>
                        <span>/</span>
                        <a href="">生鲜</a>
                        <span>/</span>
                        <a href="">母婴</a>
                    </li>
                    <li>
                        <i class="iconfont icon-yiyaoxiang"></i>
                        <a href="">医药</a>
                        <span>/</span>
                        <a href="">保健</a>
                        <span>/</span>
                        <a href="">进口</a>
                    </li>
                </ul>
            </div>
            <div class="banner-main">
                <div class="banner-nav">
                    <ul>
                        <li><a href="#"style="color: #FF0036">天猫</a></li>
                        <li class="pipe">|</li>
                        <li><a href="#"style="color: #FF0036">聚划算</a></li>
                        <li class="pipe">|</li>
                        <li><a href="#"style="color: #33c900">天猫超市</a></li>
                        <li class="pipe">|</li>
                        <li><a href="#">司法拍卖</a></li>
                        <li class="pipe">|</li>
                        <li><a href="#">飞猪旅行</a></li>
                        <li class="pipe">|</li>
                        <li><a href="#">天天特卖</a></li>
                        <li class="pipe">|</li>
                        <li><a href="#">极有家</a></li>
                        <li class="pipe">|</li>
                        <li><a href="#">淘宝直播</a></li>
                    </ul>
                </div>
                <div class="banner-init">
                    <div class="swiper mySwiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="./img/banner-1.png" alt=""></div>
                            <div class="swiper-slide"><img src="./img/banner-2.jpg" alt=""></div>
                            <div class="swiper-slide"><img src="./img/banner-3.jpg" alt=""></div>
                            <div class="swiper-slide"><img src="./img/banner-4.jpg" alt=""></div>
                            <div class="swiper-slide"><img src="./img/banner-5.avif" alt=""></div>
                        </div>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-pagination"></div>
                    </div>
                  
                </div>
            </div>
        </div>
    </div>
    <div class="layer area">
        <h3>
            <span>猜你喜欢</span>
            <img src="./img/yourlike.png" alt="">
        </h3>
        <div class="goods-content">
            <!-- <div class="goods-content-item">
                <a href="" class="item-link">
                    <div class="item-img">
                        <img src="./img/甜甜花娘坤.jpg" alt="">
                    </div>
                    <div class="item-info">
                        <p>【重磅新品】Joocyee酵色持妆晶冻口红烟熏系列镜面唇冻514护唇润</p>
                    </div>
                    <div class="item-price">
                        <span class="price-value">
                            <em>￥</em>
                            89
                        </span>
                    </div>
                </a>
            </div> -->
        </div>
    </div>
    <div class="toolkit">
        <div class="toolkit-list">
            <div class="im-entry toolkit-list-item">
                <i class="item-top iconfont icon-xiaoxi"></i>
                <div class="item-bom">
                    <span>消息</span>
                </div>
            </div>
            <div class="toolkit-list-item">
                <i class="item-top iconfont icon-kefu"></i>
                <div class="item-bom">
                    <span>官方客服</span>
                </div>
            </div>
            <div class="toolkit-list-item">
                <i class="item-top iconfont icon-fankui"></i>
                <div class="item-bom">
                    <span>反馈</span>
                </div>
            </div>
            <div class="toolkit-list-item">
                <i class="item-top iconfont icon-jubao"></i>
                <div class="item-bom">
                    <span>举报</span>
                </div>
            </div>
            
                <div class="toolkit-list-item">
                    <a href="#">
                        <i class="item-top iconfont icon-huidingbu"></i>
                        <div class="item-bom">
                            
                            <span>回顶部</span>
                        </div>
                    </a>
                </div>
            
        </div>
    </div>
    <script src="./swiper/swiper-bundle.min.js"></script>
    <script src="./js/request.js"></script>
    <script src="./js/jsonp.js"></script>
    <script type="module" src="js/main.js"></script>
    <script>
        function fn2(data) {
            const { s } = data
            document.querySelector('#serach-content').innerHTML = ''
            s.forEach(item=>{
                document.querySelector('#serach-content').innerHTML += `
                    <li>${item}</li>
                `
            })           
        }

        class Index{
            constructor(){
                this.user = document.querySelector('#user')
                this.token = localStorage.getItem('token')
                // console.log(this.token)
                this.goods = document.querySelector('.goods-content')
                this.input = document.querySelector('.main-search')
                this.init()
            }
            init(){
                this.render()
            }
           
            render(){
                this.detectionToken()
                this.getGoods()
                this.searching()
            }
            searching(){
                this.input.addEventListener('input',()=>{
                    jsonp('https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su', {cb:'fn2', wd: this.input.value})  
                    document.querySelector('#serach-content').style.display='block'
                }) 
                this.input.addEventListener('mouseout',()=>{
                    document.querySelector('#serach-content').style.display='none'
                })
            }
            async detectionToken(){
                let data = await get({url:'http://127.0.0.1:1270/user/token','tokenP':this.token})
                console.log(this.token)
                const {code,message,info} = JSON.parse(data)
                console.log(message)
                if(info){
                    const {username}= info
                    this.user.innerHTML =`
                        <a href="./html/my.html">欢迎，${username}</a>
                    `
                }
            }
            async getGoods(){
                let data = await get({url:'http://127.0.0.1:1270/goods/list'})
                let userData = JSON.parse(data).slice(100,142)
                userData.forEach(item => {
                    this.goods.innerHTML += `
                    <div class="goods-content-item" data-id=${item.goods_id}>
                        <a class="item-link" >
                            <div class="item-img">
                                <img src="${item.img_small_logo}" alt="">
                            </div>
                            <div class="item-info">
                                <p>${item.title}</p>
                            </div>
                            <div class="item-price">
                                <span class="price-value">
                                    <em>￥</em>
                                    ${item.price}
                                </span>
                            </div>
                        </a>
                    </div>
                `
                });
                for(let i=0;i<userData.length;i++){
                    this.goods.children[i].addEventListener('click',function(){
                        let id = this.dataset.id - 0
                        localStorage.setItem('list_id',id)
                        location.href='./html/goods.html'
                    })                
                }
            }
                
                
        }
        new Index()
    </script>
</body>
</html>